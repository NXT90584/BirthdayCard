<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday Tullu üñ§</title>
  <style>
    body {
      margin: 0;
      background: #0a0a0a;
      font-family: 'Courier New', monospace;
      overflow: hidden;
    }

    .envelope {
      width: 300px;
      height: 200px;
      background: #1a1a1a;
      margin: 150px auto 0;
      position: relative;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(255,0,0,0.3);
    }

    .flap {
      width: 0;
      height: 0;
      border-left: 150px solid transparent;
      border-right: 150px solid transparent;
      border-bottom: 100px solid #333;
      position: absolute;
      top: -100px;
      left: 0;
      transition: transform 1s ease;
      transform-origin: bottom center;
    }

    .envelope.open .flap {
      transform: rotateX(180deg);
    }

    .card {
      width: 280px;
      height: 180px;
      background: #fff;
      position: absolute;
      top: 10px;
      left: 10px;
      border-radius: 8px;
      padding: 20px;
      box-sizing: border-box;
      opacity: 0;
      transform: translateY(50px);
      transition: all 1s ease;
    }

    .envelope.open .card {
      opacity: 1;
      transform: translateY(0);
    }

    .card h1 {
      margin: 0;
      font-size: 20px;
      color: #e60000;
    }

    .card p {
      font-size: 16px;
      color: #111;
      margin-top: 8px;
    }

    .name {
      font-size: 14px;
      margin-top: 12px;
      font-weight: bold;
      color: #555;
    }

    .confetti, .bullet {
      position: absolute;
      width: 10px;
      height: 10px;
      background: red;
      top: 0;
    }

    .bullet {
      width: 4px;
      height: 12px;
      background: yellow;
      border-radius: 2px;
      animation: fire 0.8s linear;
    }

    @keyframes fire {
      0% {transform: translateY(0);}
      100% {transform: translateY(-400px);}
    }

    @keyframes confetti {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(600px) rotate(720deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

<div class="envelope" onclick="openCard()">
  <div class="flap"></div>
  <div style="
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 0 5px #000;
    text-align: center;
    pointer-events: none;
  ">
    üî´ Click me to open
  </div>
  <div class="card">
    <h1>üí• Happy Tullu My Birodar </h1>
    <p>To my 14 year old crime partner ‚ò†Ô∏èüí£</p>
    <div class="name">‚Äî Annu Bhai üî´</div>
  </div>
</div>

<audio id="voice" src="voice.mp3"></audio>

<script>
function openCard() {
  const env = document.querySelector('.envelope');
  env.classList.add('open');

  const audio = document.getElementById('voice');
  audio.volume = 0;
  audio.play();

  // Fade in voice over 2 seconds
  let vFadeIn = setInterval(() => {
    if (audio.volume < 0.5) {
      audio.volume = Math.min(audio.volume + 0.05, 0.5);
    } else {
      clearInterval(vFadeIn);
    }
  }, 200);

  audio.onended = () => {
    const bg = document.getElementById('bgmusic');
    bg.volume = 0;
    bg.play();

    // Fade in bg music over 2 seconds
    let bFadeIn = setInterval(() => {
      if (bg.volume < 0.4) {
        bg.volume = Math.min(bg.volume + 0.04, 0.4);
      } else {
        clearInterval(bFadeIn);
      }
    }, 200);

    // Fade out bg music after 1 minute
    setTimeout(() => {
      const fadeInterval = setInterval(() => {
        if (bg.volume > 0.01) {
          bg.volume -= 0.01;
        } else {
          bg.pause();
          clearInterval(fadeInterval);
        }
      }, 200);
    }, 60000);
  };

  // Confetti
  for (let i = 0; i < 60; i++) {
    let confetti = document.createElement('div');
    confetti.classList.add('confetti');
    confetti.style.left = Math.random() * window.innerWidth + 'px';
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
    confetti.style.animationName = 'confetti';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 6000);
  }

  // Gunshots üî´
  for (let i = 0; i < 10; i++) {
    let bullet = document.createElement('div');
    bullet.classList.add('bullet');
    bullet.style.left = `${150 + (Math.random() * 100 - 50)}px`;
    bullet.style.bottom = '0px';
    bullet.style.position = 'absolute';
    document.body.appendChild(bullet);
    setTimeout(() => bullet.remove(), 800);
  }
}
</script>

<audio id="bgmusic" src="bgmusic.mp3" loop></audio>

<script>
  function openCard() {
    const env = document.querySelector('.envelope');
    env.classList.add('open');

    // Play voice with lower volume
    const audio = document.getElementById('voice');
    audio.volume = 0.5;
    audio.play();

    // When voice ends, play background music
    audio.onended = () => {
      const bg = document.getElementById('bgmusic');
      bg.volume = 0.4;
      bg.play();

      // Fade out after 1 minute
      setTimeout(() => {
        const fadeInterval = setInterval(() => {
          if (bg.volume > 0.01) {
            bg.volume -= 0.01;
          } else {
            bg.pause();
            clearInterval(fadeInterval);
          }
        }, 200); // decrease every 200ms
      }, 60000); // start fading after 1 minute
    };

    // Confetti
    for (let i = 0; i < 60; i++) {
      let confetti = document.createElement('div');
      confetti.classList.add('confetti');
      confetti.style.left = Math.random() * window.innerWidth + 'px';
      confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
      confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
      confetti.style.animationName = 'confetti';
      document.body.appendChild(confetti);
      setTimeout(() => confetti.remove(), 6000);
    }

    // Gunshots üî´
    for (let i = 0; i < 10; i++) {
      let bullet = document.createElement('div');
      bullet.classList.add('bullet');
      bullet.style.left = `${150 + (Math.random() * 100 - 50)}px`;
      bullet.style.bottom = '0px';
      bullet.style.position = 'absolute';
      document.body.appendChild(bullet);
      setTimeout(() => bullet.remove(), 800);
    }
  }
</script>

</body>
</html>

